<!doctype html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>eloquent javascript canvas</title>
        
        <!--<link rel="stylesheet" href="styles.css"/>-->
        <style>

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
        </style>
    </head>
    <body>

        <p>Normal HTML here.</p>
        <svg xmlns="http://www.w3.org/2000/svg">
            <circle r="50" cx="50" cy="50" fill="red"/>
            <rect x="120" y="5" width="90" height="90"
                stroke="blue" fill="none"/>
        </svg>

        <!-- <p>Before canvas.</p>
            <canvas width="600" height="300"></canvas>
        <p>After canvas.</p> -->

        <script>
            // let circle = document.querySelector("circle");
            // circle.setAttribute("fill", "cyan");

            // let canvas = document.querySelector("canvas");
            // let context = canvas.getContext("2d");

            // context.fillStyle = "red";
            // context.fillRect(10, 10, 100, 50);
            
            // let cx = document.querySelector("canvas").getContext("2d");
            // cx.strokeStyle = "blue";
            // cx.strokeRect(5, 5, 50, 50);
            // cx.lineWidth = 5;
            // cx.strokeRect(135, 5, 50, 50);
            
            // let cx1 = document.querySelector("canvas").getContext("2d");
            // cx1.beginPath();
            // for (let y = 10; y < 100; y += 10) {
            //     cx1.moveTo(10, y);
            //     cx1.lineTo(90, y);
            // }
            // cx1.stroke();

            // let cx2 = document.querySelector("canvas").getContext("2d");
            // cx2.fillStyle = "green";
            // cx2.beginPath();
            // cx2.moveTo(50, 10);
            // cx2.lineTo(10, 70);
            // cx2.lineTo(90, 70);
            // cx2.fill();
            
            // let cx = document.querySelector("canvas").getContext("2d");
            // cx.beginPath();
            // cx.moveTo(10, 90);
            // // control=(60,10) goal=(90,90)
            // cx.quadraticCurveTo(60, 10, 90, 90);
            // cx.lineTo(60, 10);
            // cx.closePath();
            // cx.stroke();
            
            // let cx = document.querySelector("canvas").getContext("2d");
            // cx.beginPath();
            // cx.arc(50, 50, 40, 0, Math.PI);
            // cx.moveTo(150, 50);
            // cx.arc(150, 50, 40, 0, 0.5 * Math.PI);
            // cx.strokeStyle = "blue";
            // cx.lineWidth = 2;
            // cx.stroke();
            
            // const results = [
            //     {name: "Satisfied", count: 1043, color: "lightblue"},
            //     {name: "Neutral", count: 563, color: "lightgreen"},
            //     {name: "Unsatisfied", count: 510, color: "pink"},
            //     {name: "No comment", count: 175, color: "silver"}
            // ];
            
            // let cx = document.querySelector("canvas").getContext("2d");
            // let total = results.reduce(
            //     (currentValue, {count}) => currentValue + count, 0);
            
            // let arcBegin = -0.5 * Math.PI;
            // let center = {x: 100, y: 100};
            // for(let elem of results){

            //     let arcSlice = elem.count / total * 2 * Math.PI;

            //     cx.beginPath();
            //     cx.arc(center.x, center.y, 80, arcBegin, arcBegin + arcSlice);
            //     cx.lineTo(center.x, center.y);
            //     cx.fillStyle = elem.color;
                
            //     cx.fill();

            //     arcBegin += arcSlice;
            // }

            // let cx = document.querySelector("canvas").getContext("2d");
            // cx.font = "28px Georgia";
            // cx.fillStyle = "fuchsia";
            // cx.textBaseline = "alphabetic";
            // cx.fillText("I can draw text, too!", 10, 50);

            // let cx = document.querySelector("canvas").getContext("2d");
            // let img = document.createElement("img");
            // img.src = "img/hat.png";

            // img.addEventListener("load", () => {
            //     for(let x = 10; x < 200; x += 30){
            //         cx.drawImage(img, x, 10);
            //     }
            // });

            // let cx = document.querySelector("canvas").getContext("2d");
            // let img = document.createElement("img");
            // img.src = "img/player_big.png";
            // let spriteW = 48, spriteH = 60;
                
            // function flipHorizontally(context, around) {
            //     context.translate(around, 0);
            //     context.scale(-1, 1);
            //     context.translate(-around, 0);
            // }
        
            // img.addEventListener("load", () => {
            //     let cycle = 0;
                
            //     flipHorizontally(cx, spriteW);

               
              
            //     setInterval(() => {
            //         cx.clearRect(0, 0, spriteW, spriteH);
            //         cx.drawImage(img,
            //                      cycle * spriteW, 0, spriteW, spriteH,
            //                      0, 0, spriteW, spriteH);
            //         cycle = (cycle + 1) % 8;
            //     }, 120);
            // });
            
            // let cx = document.querySelector("canvas").getContext("2d");
            // function branch(length, angle, scale) {
                
            //     cx.fillRect(0, 0, 1, length);
            //     if (length < 8) return;
            //     cx.save();
            //     cx.translate(0, length);
            //     cx.rotate(-angle);
            //     branch(length * scale, angle, scale);
            //     cx.rotate(2 * angle);
            //     branch(length * scale, angle, scale);
            //     cx.restore();
            // }
           
            // cx.translate(300, 0);
            // branch(60, 0.4, 0.8);
            
        </script>

        <!-- <canvas width="600" height="200"></canvas>

        <script>
            
            function drawTrapezoid(top, left, topLen, baseLen, height){
                let cx = document.querySelector("canvas").getContext("2d");
                
                let diffX = 0.5 * (baseLen - topLen);
               
                cx.beginPath();
                cx.moveTo(left, top);
                cx.lineTo(left + topLen, top);
                cx.lineTo(left + topLen + diffX, height);
                cx.lineTo(left - diffX, height);
                cx.fillStyle = "blue";
                cx.closePath();
                cx.stroke();

            }
            
            function drawRedDiamond(left, top, sideLen){

                let cx = document.querySelector("canvas").getContext("2d");                
                let height = 2 * sideLen / Math.sqrt(2);

                cx.beginPath();
                cx.moveTo(left, top + height / 2);
                cx.lineTo(left + height / 2, top);
                cx.lineTo(left + height, top + height / 2);
                cx.lineTo(left + height / 2, top + height);
                cx.closePath();
                cx.fillStyle = "red";
                cx.fill();
            }

            function drawZigZagLine(top, left, lineCount, height, width){

                let cx = document.querySelector("canvas").getContext("2d");    
                let heightPerLine = height / lineCount;
                
                cx.beginPath();
                cx.moveTo(left, top);
                let xDiff = width;
                for(let i = 0; i < lineCount; i++){
                    cx.lineTo(
                        i % 2 == 0 ? left + xDiff : left,
                        top + (i + 1) * heightPerLine);

                }
                cx.stroke();
            }

            function drawSpiral(ctX, ctY, radius1, radius2, lineCount){

                let cx = document.querySelector("canvas").getContext("2d");  

                let pos = {x: ctX + radius1, y: ctY};
                let alpha = Math.PI / 15;

                cx.beginPath();
                cx.moveTo(ctX + radius1, ctY);

                for(let i = 0; i < lineCount; i++){

                    let radius = radius1 - (i / lineCount) * (radius1 - radius2);
                    console.log("radius", radius);

                    let diffX = Math.cos(alpha * i) * radius;
                    let diffY = Math.sin(alpha * i) * radius;
                    
                    console.log("diffX", diffX);
                    console.log("diffY", diffY);

                    pos.x = (ctX) + diffX;
                    pos.y = ctY + diffY;

                    cx.lineTo(pos.x, pos.y);
                }
                cx.stroke();
            }

            drawTrapezoid(50, 50, 100, 150, 100);
            drawRedDiamond(200, 50, 50);
            drawZigZagLine(50, 300, 10, 100, 80);
            drawSpiral(400 + 50, 50 + 50, 50, 5, 100);

        </script> -->

        <!-- <canvas width="400" height="400"></canvas>
        <script>
            
            let cx = document.querySelector("canvas").getContext("2d");

            let lastTime = null;
            function frame(time) {
                if (lastTime != null) {
                    updateAnimation(Math.min(100, time - lastTime) / 1000);
                }
                lastTime = time;
                requestAnimationFrame(frame);
            }
            requestAnimationFrame(frame);

            let pos = {x: 200, y: 200};
            let speed = {x: 10, y: 3};

            function updateAnimation(step) {

                cx.beginPath();
                cx.fillStyle = "blue";
                cx.fillRect(0, 0, 400, 400);
                
                cx.beginPath();
                cx.fillStyle = "red";
                cx.arc(pos.x, pos.y, 10, 0, 2 * Math.PI);
                cx.fill();

                pos.x += speed.x;
                pos.y += speed.y;

                if(pos.x >= 400 || pos.x < 0) speed.x = -speed.x;
                if(pos.y >= 400 || pos.y < 0) speed.y= -speed.y;
            }


        </script> -->

    </body>
</html>